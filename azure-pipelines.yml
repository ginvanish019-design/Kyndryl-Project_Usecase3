trigger:
  branches:
    include:
      - main

pool:
  name: 'Anish_Agent'

steps:
- checkout: self

# ğŸ Check Python version
- bash: |
    echo "ğŸ Checking Python version..."
    python3 --version
  displayName: "Check Python Version"

# ğŸ“¦ Install dependencies including azure-monitor-query
- bash: |
    echo "ğŸ“¦ Installing Azure SDK packages..."
    python3 -m pip install --upgrade pip
    python3 -m pip install \
      azure-identity \
      azure-mgmt-compute \
      azure-mgmt-resource \
      azure-monitor-query
    echo "âœ… Azure SDKs installed successfully."
  displayName: "Install Azure SDK Dependencies"

# ğŸš€ Run your Python script
- bash: |
    echo "ğŸš€ Running Multi-Cloud Auto Manager..."
    python3 multi_cloud_auto_manager.py
  displayName: "Run Multi-Cloud Auto Manager"
